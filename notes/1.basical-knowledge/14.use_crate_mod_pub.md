
# 简单说明

以下是为了简单说明一下 在 `Rust` 中如何管理 项目的包

以当前的文件结构如下：

```
src   
│  main.rs
│  same_level.rs
│
└─utils
    │  mod.rs
    │
    ├─email
    │      mod.rs
    │
    └─tools
            mod.rs

```

其中需要注意的是：

 - 每个包文件里面，为了能导出，至少目录里面应该包含一个 `mod.rs` 文件，并且文件名是固定的，不能被改动，它相当于在 `js` 里面的 `index.js` 文件
 - `crate` 关键字只能在 `use` 关键字中使用，它代表当前项目目录的 `/src/` 文件路径，也就是项目的 根路径
 - 为了让文件里面的函数，或者文件模块能被外部访问到，需要使用 `pub` 关键字标注，或者可以称为 导出， 因为默认情况下，rust 文件内定义的函数是 私有的，只有本文件内的函数和对象才有访问权限
 - 对于模块的导出和能被外部跨层级，也需要借助父级 `mod.rs` 文件中使用 `pub mod` 关键字将其导出


其中对于 `可见性 (pub)` 的总结如下：

| 关键字             | 可见范围             | 备注                                                                          |
| ------------------| -------------------- | ----------------------------------------------------------------------------- |
| `pub`             | crate 内外全部可见    | 默认对外可见                                                                   |
| `pub(in path)`    | 指定模块及其子模块可见 | path 可以是父模块或任意父路径                                                   |
| `pub(crate)`      | 当前 crate 内部可见   | 等价于pub(in crate)，在 crate（根目录/src/）内任何模块可访问，但 crate 外不可访问  |
| `pub(super)`      | 父模块及当前模块可见   | 用于子模块向父模块暴露接口                                                      |
| `pub(self)`       | 当前模块可见          | 与默认 private (不写 pub) 等价                                                 |
| 默认（不写 pub）   | 当前模块可见          | 与 `pub(self)` 等价                                                            |




# 其中对应的项目文件内容如下：


## 1. `src/main.rs`

```rust
// src/main.rs
mod same_level; // 引用同级别目录下面的 模块文件,即默认相对路径不用 . 表示
mod utils;

// 其中 crate 代表根目录,这是绝对路径的表示
use crate::utils::utils_mod_fnc;

fn main() {
    // 调用同级别目录下面的 包里面的函数
    same_level::same_level_fnc(); // 打印： this is the same_level_fnc !

    // 调用 utils 文件下的 mod.rs 文件 里面的 utils_mod_fnc 函数
    // utils::utils_mod_fnc();
    // 由于使用了 use crate::utils::utils_mod_fnc; 引用对应函数，从而可以像下面这样调用
    // 否则依托于 mod utils; 引用，可以直接像上面一样使用 utils::utils_mod_fnc(); 去调用
    utils_mod_fnc();

    // 调用 utils 文件下的 tools 文件夹下的 mod.rs 文件里面的 utils_mod_fnc 函数
    utils::tools::utils_tools_fnc();
    
}

```

## 2. `src/same_level.rs`

```rust
// src/same_level.rs

//  为了是当前函数能被别的包引用和 导入， 需要 添加 pub 关键字，因为 默认情况下包里面的函数全部都是私有的
pub fn same_level_fnc () {
    println!("this is the same_level_fnc !")
}

```

## 3. `src/utils/mod.rs`

```rust

// src/utils/mod.rs

pub mod tools;
pub mod email;  // 默认是 private， 但是为了让外部也能调到，所以使用 pub 关键字，让对应的 文件的 函数能够被调用

// use crate::utils::email::utils_email_fnc;  // crate 代表当前的绝对路径， 也就是当前项目的 /src/ 路径
// 上面那个调用等价于，因为 当前的文件和 email 文件夹在同一层  
use email::utils_email_fnc; 

//  为了是当前函数能被别的包引用和 导入， 需要 添加 pub 关键字，因为 默认情况下包里面的函数全部都是私有的
pub fn utils_mod_fnc () {
    println!("this is the utils_mod_fnc !");

    utils_email_fnc();
}

```


## 4. `src/utils/email/mod.rs`

```rust
// src/utils/email/mod.rs
pub fn utils_email_fnc () {
    println!("this is the utils_email_fnc !")
}

```

## 5. `src/utils/tools/mod.rs`


```rust

// src/utils/tools/mod.rs

//  为了是当前函数能被别的包引用和 导入， 需要 添加 pub 关键字，因为 默认情况下包里面的函数全部都是私有的
pub fn utils_tools_fnc () {
    println!("this is the utils_tools_fnc !")
}

```

> 最终当前项目的打印如下：

```txt

this is the same_level_fnc !
this is the utils_mod_fnc !  
this is the utils_email_fnc !
this is the utils_tools_fnc !

```