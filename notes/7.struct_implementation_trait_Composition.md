
# ç®€å•ä»‹ç»


ä¸‹é¢ä¸»è¦æ˜¯å…³äº `ç»“æ„ä½“ï¼ˆstructï¼‰`ï¼Œ`å®ç° (implementation)` ä»¥åŠ  `ç‰¹å¾ ï¼ˆtraitï¼‰` å’Œ `ç»„åˆï¼ˆCompositionï¼‰` ç›¸å…³çš„ä½¿ç”¨çš„è¯´æ˜



# ä¸€äº›å®é™…çš„ä¾‹å­çš„ä½¿ç”¨

## 1.  `ç»“æ„ä½“ï¼ˆstructï¼‰` ä¸€äº›å¸¸ç”¨çš„æŠ€å·§å’Œæ–¹æ³•

`ç»“æ„ä½“ ï¼ˆstructï¼‰` æ˜¯ä¸€ç§å¯ä»¥è®©ä½ å°†å¤šä¸ªå˜é‡æ”¾åœ¨åŒä¸€æŒ‡å®šç»„åå†…çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒåœ¨ Rust ä¸­æ‰®æ¼”è€…éå¸¸é‡è¦çš„è§’è‰²ï¼Œ
Rust çš„ç»“æ„ä½“ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»ï¼ˆClassï¼‰ï¼Œä½†ç»“æ„ä½“æœ¬èº«å¹¶ä¸ç›´æ¥å®šä¹‰è¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰ï¼Œå®ƒåªæ˜¯æ•°æ®çš„é›†åˆã€‚

åŒæ—¶è¿™ç§æ•°æ®ç»“æ„åœ¨ `C/C++` ä¸­ä¹Ÿéƒ½æœ‰å®šä¹‰ã€‚

### a. æ™®é€šå¸¸ç”¨çš„ `Struct ç»“æ„ä½“`

```rust

fn main() {
    #[derive(Debug)]   // å…è®¸è°ƒè¯•æ‰“å° BankAccount è¿™ä¸ª struct
    struct  BankAccount {
        owner:String,
        balance:f64,
        description:String
    }
    //  å¯¹äºä¸Šé¢å®šä¹‰çš„ç»“æ„ä½“ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ç›´æ¥è¿™ä¹ˆä½¿ç”¨
    //  1. ä½œä¸ºæˆ‘ä»¬çš„ç±»å‹æ£€æŸ¥ä½¿ç”¨
    //  ä¸ºäº†èƒ½åœ¨åé¢çš„ä¿®æ”¹ï¼Œæ­¤å¤„éœ€è¦å®šä¹‰ä¸ºä¸€ä¸ª mut ç±»å‹çš„å¯¹è±¡å®ä¾‹
    let mut account :BankAccount = BankAccount {
        owner:String::from("Bertram"),
        balance: 150.0,
        description:"this is BankAccount of Bertram".to_string(),
    };

    // ä¿®æ”¹é‡Œé¢çš„å€¼
    account.balance = 130.0;
    account.owner = "BertramYe".to_string();

    // ä¸‹é¢ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ­£å¸¸æ‰“å°æ˜¯å› ä¸ºä¸Šé¢çš„ struct ä¸Šæ·»åŠ äº† #[derive(Debug)] , è¡¨ç¤ºå…è®¸è°ƒè¯•æ‰“å°
    println!("current account details is {account:?}"); // æ‰“å°ï¼š current account details is BankAccount { owner: "BertramYe", balance: 130.0, description: "this is BankAccount of Bertram" }

    // 2. é™¤äº†ä»¥ä¸Šçš„ä¿®æ”¹ï¼Œè¿˜å¯ä»¥è¿™ä¹ˆå¹²ï¼Œç›´æ¥è¿›è¡Œææ„åˆ›å»º
    //  åœ¨è¿™ä¸€ç‚¹å’Œ nodejs  ä¸­çš„å¯¹è±¡è¯­æ³•éå¸¸ç›¸ä¼¼
    let BankAccount { description, .. } = account; // è¿™é‡Œå’Œ js å¾ˆç›¸ä¼¼ï¼Œå¯ä»¥ç›´æ¥ææ„
    let new_account = BankAccount{
        owner:"Bertram".to_string(),
        description,
        ..account  // è¿™ä¸€ä¸ªè§£æä¸€å®šè¦æ”¾åœ¨æœ€åé¢ï¼Œè¿™ä»£è¡¨ï¼Œé™¤äº†ä»¥ä¸Šæä¾›çš„ owner å’Œ description å­—æ®µï¼Œå…¶ä»–çš„å‰©ä¸‹çš„å­—æ®µå¤ç”¨åŸæ¥ account å­—æ®µä¸­å‰©ä¸‹çš„å­—æ®µï¼Œè€Œåœ¨jsè¯­æ³•ä¸­ï¼Œå®ƒä¼šç›´æ¥è¦†ç›–ï¼Œè¿™ä¸€ç‚¹æœ‰æ‰€ä¸åŒ
    };

    println!("current new_account details is {new_account:?}"); // æ‰“å°ï¼š current new_account details is BankAccount { owner: "Jim", balance: 130.0, description: "this is BankAccount of Bertram" }
}

```
### b. `å•å…ƒç»“æ„ä½“(Unit-Like Struct)`

Rust ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹å«åš `unit typeï¼š()`ï¼Œè¡¨ç¤º`â€œç©ºå€¼â€`æˆ–`â€œæ— è¿”å›å€¼â€`ï¼Œæœ‰ç‚¹åƒå…¶ä»–è¯­è¨€é‡Œçš„ `void` æˆ–`ç©ºå…ƒç»„`ã€‚

åŒæ—¶ä¹‹æ‰€ä»¥ä¸ºäº†ä½¿ç”¨ `å•å…ƒç»“æ„ä½“(Unit-Like Struct)` æ¥å®šä¹‰ç»“æ„ä½“ï¼Œæ­¤æ—¶å¯ä»¥ç±»æ¯”ä¸ºï¼Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€é‡Œé¢çš„æ²¡æœ‰åˆå§‹åŒ–å‚æ•°å’Œå±æ€§å€¼çš„ `ç±» class`, 
æœ‰äº›`ç±»`åœ¨å®šä¹‰å’Œä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªæƒ³è¦é‡Œé¢æ·»åŠ å¯¹åº”çš„æ–¹æ³•ï¼Œæ­¤æ—¶å¯¹äºæœ‰äº›ç»“æ„ä½“ï¼Œå½“æˆ‘ä»¬åªæƒ³å®šä¹‰ä¸€äº›å®ç°æ–¹æ³•æ—¶ï¼Œ
è€Œæ— ä»»ä½•å±æ€§å’Œå­—æ®µéœ€è¦æ·»åŠ æ—¶ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª`å•å…ƒç»“æ„ä½“(Unit-Like Struct)`ã€‚

è€Œ `unit-like struct` çš„è¡Œä¸ºå°±å¾ˆåƒè¿™ä¸ª `unit type`ï¼š
 - å®ƒæ²¡æœ‰ä»»ä½•æ•°æ®ã€‚
 - å®ƒçš„æ‰€æœ‰å®ä¾‹éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼ˆå› ä¸ºæ ¹æœ¬æ²¡æœ‰å­—æ®µæ¥åŒºåˆ†ï¼‰ã€‚
 - å®ƒåœ¨å†…å­˜ä¸­ä¸å ç©ºé—´,å› ä¸ºç»“æ„ä½“ä¸­æ²¡æœ‰ä»»ä½•å˜é‡å’Œå€¼éœ€è¦å­˜å‚¨ï¼Œæ‰€ä»¥å†…å­˜çš„æ¶ˆè€—ä¸º 0 å­—èŠ‚ã€‚
 - ä½œä¸ºæ ‡è®°ï¼ˆmarker typeï¼‰ï¼šå¸¸ç”¨äºæ³›å‹æˆ– trait ç³»ç»Ÿä¸­ï¼Œåªç”¨æ¥è¡¨ç¤ºæŸç§è¡Œä¸ºæˆ–è§’è‰²ï¼Œè€Œä¸éœ€è¦å­˜å‚¨ä»»ä½•å®é™…æ•°æ®ã€‚


```rust
// å®šä¹‰ä¸€ä¸ª unit-like structï¼Œ é‡Œé¢æ²¡æœ‰ä»»ä½•å±æ€§å’Œå­—æ®µ
struct Logger;

//  å®ç°è¿™ä¸ªç»“æ„ä½“æ—¶ï¼Œåªæœ‰ log æ–¹æ³•
impl Logger {
    fn log(&self, msg: &str) {
        println!("[LOG]: {}", msg);
    }
}

//  ä¹Ÿå¯ä»¥åªè¡¨ç¤ºæŸä¸ªè§’è‰²çš„å ä½
struct WriteOnly; // å®šä¹‰ä¸€ä¸ª unit-like structï¼Œ é‡Œé¢æ²¡æœ‰ä»»ä½•å±æ€§å’Œå­—æ®µï¼Œåªè¡¨ç¤ºæ˜¯å¦èƒ½è¢«å†™çš„è§’è‰²æƒé™çš„æŠ½è±¡

fn main() {
    let logger = Logger; // ä¸éœ€è¦åŠ æ‹¬å·
    logger.log("Hello from Logger!"); // æ‰“å°ï¼š [LOG]: Hello from Logger!
}

```


### c. `å…ƒç»„ç»“æ„ä½“ ï¼ˆTuple Structï¼‰`

åœ¨ Rust é‡Œï¼Œé™¤äº†æ™®é€šçš„ `å…·åå­—æ®µç»“æ„ä½“` å’Œ `Unit-like ç»“æ„ä½“`ï¼Œè¿˜æœ‰ä¸€ç§ä»‹äºä¸¤è€…ä¹‹é—´çš„ç»“æ„ä½“ç±»å‹ï¼Œå«åš `Tuple Structï¼ˆå…ƒç»„ç»“æ„ä½“ï¼‰`ã€‚

å®ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š
  - æ²¡æœ‰å­—æ®µåï¼›
  - å­—æ®µç±»å‹ç”¨åœ†æ‹¬å· (...) æŒ‰é¡ºåºåˆ—å‡ºï¼›
  - å®ä¾‹åŒ–æ—¶ä¹Ÿç”¨åœ†æ‹¬å·ï¼›
  - å­—æ®µè®¿é—®é ã€Œindex ä¸‹æ ‡ã€ï¼Œè€Œä¸æ˜¯åå­—ã€‚


```rust

// å®šä¹‰ä¸¤ä¸ª `Tuple Structï¼ˆå…ƒç»„ç»“æ„ä½“ï¼‰`
struct  Color(u8,u8,u8);
struct Point(f32,f32);

fn main() {
    // åˆå§‹åŒ–ä»¥ä¸Šçš„å¯¹è±¡
    let red = Color(255, 0, 0);
    let p = Point(10.5, 20.3);

    // è®¿é—®å­—æ®µï¼šé€šè¿‡ .0ã€.1ã€.2 ä¸‹æ ‡
    // è¿™é‡Œä½¿ç”¨å ä½ç¬¦ï¼Œæ˜¯å› ä¸ºä¸å¯ä»¥ä½¿ç”¨ {red.0} è¿™ç§å†™æ³•ï¼Œä¼šæŠ¥é”™çš„
    println!("Red = ({}, {}, {})", red.0, red.1, red.2); // æ‰“å°ï¼š Red = (255, 0, 0)
    println!("Point = ({}, {})", p.0, p.1); // æ‰“å°ï¼š Point = (10.5, 20.3)

}


```

> è¡¥å……ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šå…ƒç»„ (u8,u8,u8);ï¼Ÿ

ç¡®å®å¯ä»¥ï¼Œä½†å…ƒç»„ç»“æ„ä½“ç›¸æ¯”æ™®é€šå…ƒç»„æœ‰è¿™äº›ä¼˜åŠ¿ğŸ‘‡

| æ™®é€šå…ƒç»„ `(u8, u8, u8)`                  | å…ƒç»„ç»“æ„ä½“ `struct Color(u8, u8, u8);` |
| --------------------------------------- | ------------------------------------ |
| åªæœ‰ç±»å‹ï¼Œæ²¡æœ‰è¯­ä¹‰                        | æœ‰ä¸€ä¸ªæ˜ç¡®çš„ç±»å‹åï¼ˆå¦‚ `Color`ï¼‰        |
| ä¸èƒ½ä¸ºå…ƒç»„å®ç°è‡ªå®šä¹‰æ–¹æ³•                  | å¯ä»¥ä¸º `Color` å®ç°æ–¹æ³•å’Œ trait         |
| æ™®é€šå…ƒç»„ä¹‹é—´ç»“æ„æ²¡æœ‰åŒºåˆ†ï¼Œèƒ½ç›´æ¥ç›¸äº’èµ‹å€¼   | ä¸åŒå…ƒç»„ç»“æ„ä½“æ˜¯ä¸åŒç±»å‹ï¼Œå³ä½¿å­—æ®µç±»å‹ç›¸åŒ |

è¯¦ç»†å¦‚ä¸‹ï¼š

##### a. å¯ä»¥é˜²æ­¢ç±»å‹ å’Œ å€¼å¾—èƒ¡ä¹±æ··ç”¨

```rust
struct Color(u8, u8, u8);
struct Point(u8, u8, u8);
fn main() {
    let c = Color(255, 0, 0); // çº¢è‰²
    let p = Point(255, 0, 0); // æŸä¸ªä¸‰ç»´ç‚¹çš„åæ ‡

    // ç±»å‹ä¸åŒï¼Œä¸èƒ½æ··ç”¨ï¼
    // let x: Point = c; // âŒ ç¼–è¯‘é”™è¯¯, è¿™æ ·å¯ä»¥é¿å…ã€ŒæŠŠçº¢è‰²å½“åæ ‡ç”¨ã€è¿™ç§ä½çº§é”™è¯¯ã€‚
}
```

##### b. å¯ä»¥åƒæ™®é€šç»“æ„ä½“ä¸€æ ·å®ç°æ–¹æ³•

```rust

struct Point(f64, f64);

// æ¯•ç«Ÿæ˜¯ç»“æ„ä½“çš„ä¸€ç§ï¼Œå¯ä»¥å®ç°æ–¹æ³•
impl Point {
    fn distance_from_origin(&self) -> f64 {
        (self.0.powi(2) + self.1.powi(2)).sqrt()
    }
}

fn main() {
    let p = Point(3.0, 4.0);
    println!("Distance: {}", p.distance_from_origin()); // 5.0
}

```

##### c. ä¹Ÿæ”¯æŒè§£æ„ï¼ˆDestructuringï¼‰


```rust
// å®šä¹‰å…ƒç»„ç»“æ„ä½“
struct Point(f64, f64);

fn main() {
    let p = Point(1.0, 2.0);
    // ä½ å¯ä»¥ç›´æ¥æŠŠå…ƒç»„ç»“æ„ä½“æ‹†æˆå˜é‡ï¼šè¿™å’Œæ™®é€šææ„ç±»ä¼¼ï¼Œå¯¹æ¯” js ä¸­çš„å¯¹è±¡ å’Œ array
    let Point(x, y) = p;

    println!("x = {}, y = {}", x, y);
}

```


## 2. `å®ç° (implementation)` 


`å®ç° (implementation)`ï¼Œåœ¨ Rust ä¸­ä½¿ç”¨å…³é”®å­—`impl`, å®ƒæ˜¯ç”¨æ¥ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰çš„åœ°æ–¹ã€‚
é€šè¿‡ impl å…³é”®å­—ï¼Œå¯ä»¥ä¸ºç»“æ„ä½“å®šä¹‰`å…³è”å‡½æ•°ï¼ˆä¸éœ€è¦å®ä¾‹åŒ–ç»“æ„ä½“çš„å‡½æ•°`ï¼‰å’Œ`æ–¹æ³•ï¼ˆéœ€è¦å®ä¾‹åŒ–ç»“æ„ä½“çš„å‡½æ•°ï¼‰`ã€‚

åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥ç®€å•å°† `ç»“æ„ä½“ï¼ˆstructï¼‰` å’Œ `å®ç° (implementation)` ç»“åˆä¸€å¹¶çœ‹æˆæ˜¯å…¶ä»–`é¢å‘å¯¹è±¡ OOP è¯­è¨€`ä¸­çš„ `ç±»ï¼ˆclassï¼‰` ä½¿ç”¨ã€‚

```rust


fn main() {   
   
   // è¿™é‡Œä¹‹æ‰€ä»¥å®šä¹‰   account ä¸º mut æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åé¢è°ƒç”¨äº† widthdraw æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¼šä¿®æ”¹ account é‡Œé¢çš„å€¼ï¼Œæ‰€ä»¥è¿™é‡Œå¿…é¡»å†™æˆ nut
   // å¦‚æœ ä½ åœ¨åé¢åªè°ƒç”¨äº† check_account å‡½æ•°ï¼Œç”±äºå®ƒæ²¡æœ‰å¯¹ account é‡Œé¢çš„å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œæ­¤æ—¶å¯ä»¥ä¸å°† account å®šä¹‰ä¸ºä¸€ä¸ª mut å¯¹è±¡
    let mut  account = BankAccount{
        owner:"Bertram".to_string(),
        balance:150.0
    };
    account.check_account();
    account.widthdraw(10.0);
    account.check_account();

}



struct  BankAccount {
    owner:String,
    balance:f64,
}


// åœ¨å®šä¹‰å®ç°ä¸­å—ï¼Œå…¶å†…å‡½æ•°ä¸èƒ½é‡åï¼Œå› ä¸ºåœ¨ rust é‡Œé¢æ²¡æœ‰ override æ¦‚å¿µï¼Œè¿™å’Œ C# æ˜¯ä¸ç›¸åŒçš„
impl BankAccount {
    
    // è¿™é‡Œé¢å¿…é¡»æ˜¯ &mut selfï¼Œ å› ä¸ºä½ åœ¨ä¿®æ”¹ BankAccount ä¸­çš„ balance å€¼ï¼Œæ‰€ä»¥æ­¤æ—¶éœ€è¦å°† BankAccount å˜æˆ mut ç±»å‹çš„ ç»“æ„ä½“ Struct
    fn widthdraw(&mut self,money:f64){
        self.balance  -= money;
        println!("withdrawed {money}")
    }

    // æ³¨æ„ä¸‹é¢ä¹‹æ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ &self æ˜¯å› ä¸ºåœ¨ check_account å‡½æ•°ä¸­ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå¯¹ BankAccount ä¸­çš„å€¼è¿›è¡Œä¿®æ”¹è¡Œä¸º
    fn check_account (&self){
        let current_owner = self.owner.to_string();
        let current_balance = self.balance;
        println!("current account owner is {current_owner}, balance is {current_balance}")
    }

}


```


## 3. å…³äºåˆ©ç”¨ `ç‰¹å¾ ï¼ˆtraitï¼‰` æ¥å®ç° ç»“æ„ä½“çš„ `ç»§æ‰¿å’Œå¤šæ€`

> é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œåœ¨ `Rust` ä¸­æ²¡æœ‰é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„`ç»§æ‰¿`æ¨¡å‹ï¼Œä½†æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨`ç‰¹å¾ (trait)`æ¥å®ç°æ¥å£å¼çš„å¤šæ€ï¼Œé€šè¿‡ trait å’Œ impl æ¥å…±äº«è¡Œä¸ºã€‚
åŒæ—¶ Rust ä¸­çš„`ç‰¹å¾ï¼ˆtraitï¼‰`æ”¯æŒç»§æ‰¿ï¼Œé€šè¿‡ç‰¹å¾ç»§æ‰¿å¯ä»¥å®ç°ç±»ä¼¼æ¥å£ç»§æ‰¿çš„åŠŸèƒ½ã€‚

å…¶ä¸­ï¼Œ `Rust çš„ç‰¹å¾ï¼ˆtraitï¼‰` ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œå®ƒå…è®¸å®šä¹‰æ–¹æ³•ç­¾åå¹¶è®©ç»“æ„ä½“å®ç°è¿™äº›æ–¹æ³•ã€‚
é€šè¿‡ç‰¹å¾ï¼Œä½ å¯ä»¥ä¸ºå¤šä¸ªç»“æ„ä½“æä¾›å…±äº«çš„è¡Œä¸ºã€‚è™½ç„¶è¿™ä¸æ˜¯çœŸæ­£çš„ç»§æ‰¿ï¼Œä½†å®ƒæä¾›äº†ä¸€ç§ç±»ä¼¼çš„å¤šæ€æœºåˆ¶ã€‚

åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Rust ä¸­ï¼Œ`trait` ä¸»è¦ç”¨äºå®šä¹‰ `æ–¹æ³•çš„æŠ½è±¡`ï¼Œå®ƒå…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªç±»å‹`å¿…é¡»å®ç°å“ªäº›æ–¹æ³•`ã€‚
ç„¶è€Œï¼Œ`trait ä¸­ ä¸èƒ½ç›´æ¥å®šä¹‰å­—æ®µï¼ˆå±æ€§ï¼‰`ï¼Œå®ƒ`åªèƒ½å®šä¹‰æ–¹æ³•çš„ç­¾å`ã€‚
è€Œå¯¹äºå±æ€§è€Œè¨€ï¼Œåº”è¯¥å®šä¹‰åœ¨ ` ç»“æ„ä½“ struct ` é‡Œé¢ï¼Œå®ƒæ˜¯å¯¹å±æ€§çš„æŠ½è±¡ã€‚


```rust

fn main() {   
   
   let dog = Dog{
    name: "Jim".to_string()
   };
   let cat = Cat{
    name: "Tom".to_string()
   };

   dog.bark();
   cat.bark();

}


// å…ˆæå– Dog å’Œ Cat éƒ½æœ‰çš„å…±åŒç‰¹å¾ é‚£å°±æ˜¯éƒ½ä¼šå« ï¼ˆbarkï¼‰
// è¿™æ ·ï¼Œé€šè¿‡ç‰¹å¾ traitï¼Œæˆ‘ä»¬å¯ä»¥è®©ä¸åŒçš„ç»“æ„ä½“å…±äº«ç›¸åŒçš„æ–¹æ³•ã€‚
trait Barking {
    fn bark(&self); // åªèƒ½å®šä¹‰æ–¹æ³•çš„ç­¾å
}

struct Dog {
    name: String,
}

struct Cat {
    name: String,
}

// åœ¨ä¸‹é¢ impl ä¸­çš„ for å…³é”®å­—ï¼Œå®ƒæ˜¯ å®ç° trait çš„è¯­æ³•éƒ¨åˆ†ã€‚
// é€šè¿‡ impl å’Œ forï¼Œä½ å¯ä»¥æŒ‡å®šæŸä¸ªç±»å‹ï¼ˆå¦‚ç»“æ„ä½“ã€æšä¸¾æˆ–å…¶å®ƒç±»å‹ï¼‰å¦‚ä½•å®ç°ç‰¹å®šçš„ traitã€‚
impl Barking for Dog {
    fn bark(&self) {
        println!("the dog of {} bark as Woof!", self.name);
    }
}

impl Barking for Cat {
    fn bark(&self) {
        println!("the cat of {} bark as Meow!", self.name);
    }
}


```

é™¤äº†ä»¥ä¸Šï¼Œè¿˜å¯ä»¥æœ‰ä¸‹é¢æœ‰æ„æ€çš„ä»£ç ï¼Œä¸ºå½“å‰ Rust æ‰€é»˜è®¤çš„ ç±»å‹æ‹“å±•æ–¹æ³•

```rust

trait Addable {
    // æ³¨æ„è¿™é‡Œé¢çš„ add æºå¸¦äº† self ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸ªå®ä¾‹æ–¹æ³•ï¼Œè€Œä¸æ˜¯é™æ€æ–¹æ³•
    fn add(&self, other: &Self) -> Self;
}

impl Addable for i32 {
    fn add(&self, other: &Self) -> Self {
        self + other
    }
}

impl Addable for f64 {
    fn add(&self, other: &Self) -> Self {
        self + other
    }
}

fn main() {
    // å¯¹äºä»¥ä¸Šçš„ä»£ç è€Œè¨€
    // impl Addable for i32 å’Œ impl Addable for f64 åˆ†åˆ«ä¸º i32 å’Œ f64 ç±»å‹å®ç°äº† Addable è¿™ä¸ª traitã€‚ä½¿å¾—å¯¹äº é»˜è®¤çš„ ç±»å‹ f64 å’Œ i32 éƒ½æœ‰ä¸€ä¸ª add æ–¹æ³•
    // æ³›å‹å®ç°å¯ä»¥é€šè¿‡å¤šä¸ªç±»å‹å…±äº«ç›¸åŒçš„è¡Œä¸ºï¼Œadd æ–¹æ³•çš„å…·ä½“å®ç°ä¾èµ–äºå…·ä½“çš„ç±»å‹ã€‚
    
    let int_sum = 10.add(&5);  // ä½¿ç”¨ Addable ä¸º i32 å®ç°çš„ add, è¿™é‡Œçš„ 10 éšå¼çš„ä»£æ›¿äº† i32
    // éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸Šé¢çš„å¥‡æ€ªçš„å†™æ³•æ˜¯å› ä¸º åœ¨ Rust ä¸­ï¼ŒåŸºæœ¬ç±»å‹å¦‚ i32 å’Œ f64 å¹¶ä¸éœ€è¦æ˜¾å¼åˆ›å»ºå®ä¾‹ã€‚
    // ä½ å¯ä»¥ç›´æ¥å¯¹å­—é¢é‡ï¼ˆå¦‚ 10ï¼‰è°ƒç”¨æ–¹æ³•ã€‚Rust è‡ªåŠ¨ä¸ºè¿™äº›å­—é¢é‡åˆ›å»ºå¼•ç”¨ï¼Œä½¿å¾—è°ƒç”¨æ–¹æ³•å˜å¾—éå¸¸ç®€æ´ã€‚
    // å…¶æœ¬è´¨ç­‰ä»·äºä¸‹é¢è¿™æ ·ï¼š
    // let int_sum = (&10).add(&5);  // é¦–å…ˆåˆ›å»ºå¯¹ 10 ä½œä¸º i32 ç±»å‹çš„å¼•ç”¨
    // let int_sum = Addable::add(&10, &5); // ç»§ç»­è°ƒç”¨ trait çš„å®ä¾‹æ–¹æ³•

    //  åŒæ—¶ä¸èƒ½åƒä¸‹é¢è¿™ä¹ˆè°ƒç”¨ï¼Œè¿™æ˜¯å› ä¸º Addable{}.add(&10, &5) è¿™æ ·çš„å†™æ³•ä¸ä¼šæœ‰æ•ˆï¼Œå› ä¸ºå®ƒæ˜¯ é”™è¯¯çš„è¯­æ³•ï¼Œæ— æ³•å®ä¾‹åŒ– Addable traitã€‚
    //  Addable æ˜¯ä¸€ä¸ª traitï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç»“æ„ä½“ structï¼Œå› æ­¤ä¸èƒ½åƒ Addable{} è¿™æ ·å®ä¾‹åŒ–ã€‚  
    // let int_sum = Addable{}.add(&10, &5);
    
    
    let float_sum = 10.5.add(&5.5);  // ä½¿ç”¨ Addable ä¸º f64 å®ç°çš„ add
    
    println!("int sum: {}", int_sum);  // è¾“å‡ºï¼šint sum: 15
    println!("float sum: {}", float_sum);  // è¾“å‡ºï¼šfloat sum: 16
}


```

å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œéœ€è¦æ³¨æ„å’Œè§£é‡Šä¸€ä¸‹ä¸‹é¢å‡ ç‚¹ï¼š

a. `::` è¯­æ³•çš„ä½œç”¨:

åœ¨ Rust ä¸­ï¼Œ`::` ä¸»è¦ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š

 - é™æ€æ–¹æ³•çš„è°ƒç”¨ï¼šæ¯”å¦‚è°ƒç”¨ç»“æ„ä½“æˆ–æšä¸¾çš„å…³è”å‡½æ•°ï¼ˆå¦‚ newã€parse ç­‰ï¼‰ã€‚
 - ç±»å‹åè®¿é—®ï¼šä¾‹å¦‚è®¿é—®ç±»å‹çš„å…³è”å¸¸é‡ã€æšä¸¾å˜ä½“ç­‰ã€‚
 - `trait`çš„å…³è”æ–¹æ³•ï¼šé€šè¿‡ `:: `æ¥è°ƒç”¨ `trait` ä¸­å®šä¹‰çš„`é™æ€æ–¹æ³•`æˆ–`å®ä¾‹æ–¹æ³•`ã€‚

b. å¦‚ä½•ç†è§£ `10.add(&5)` å’Œ `Addable::add(&10, &5)`

é¦–å…ˆï¼Œç”±äº `add` æ–¹æ³•ä¸­çš„å…¥å‚æ˜¯å«æœ‰ `&self`,å³è‡ªèº«`ç‰¹å¾`çš„å…¥å‚ï¼Œæ‰€ä»¥ `add` æ–¹æ³•æ˜¯ `ç‰¹å¾Addable` ä¸­çš„`å®ä¾‹æ–¹æ³•`ï¼Œå®ƒæœ‰ä¸€ä¸ª `&self` å‚æ•°ï¼Œæ„å‘³ç€å®ƒæ˜¯ä¾èµ–äº`å®ä¾‹`çš„ã€‚

ä½†ä¸ºä»€ä¹ˆ `Rust` ä½¿ç”¨ `::` æ¥è°ƒç”¨å®ƒï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨ `.` æ¥åƒè°ƒç”¨ `ç»“æ„ä½“ struct` å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ä¸€æ · è°ƒç”¨`add` æ–¹æ³•å‘¢ï¼Ÿ

é¦–å…ˆæ¥çœ‹ä¸‹é¢çš„ä¸¤ç§å†™æ³•ï¼š
 - `10.add(&5)`ï¼šè¿™é‡Œ `10` æ˜¯ `i32` ç±»å‹çš„å­—é¢é‡ã€‚`Rust` ä¼šè‡ªåŠ¨æŠŠå­—é¢é‡ `10` è½¬æ¢æˆå¼•ç”¨ `&10`ï¼Œå¹¶ä½¿ç”¨ `Addable trait` ä¸º `i32` ç±»å‹æä¾›çš„ `add` æ–¹æ³•ã€‚
è¿™çœ‹èµ·æ¥åƒæ˜¯é€šè¿‡ `å®ä¾‹æ–¹æ³•` æ¥è°ƒç”¨ `add`ï¼Œä½†èƒŒåå®é™…ä¸Šä¼šè¢« Rust è‡ªåŠ¨è§£æä¸º `Addable::add(&10, &5)`ã€‚
 - `Addable::add(&10, &5)`ï¼šè¿™ç§å†™æ³•æ˜¾å¼åœ°è°ƒç”¨äº† `Addable trait` ä¸­å®šä¹‰çš„ `add` æ–¹æ³•ã€‚é€šè¿‡ `::` æ¥æŒ‡å®š `Addable trait`ï¼Œå¹¶æ‰‹åŠ¨ä¼ é€’ `&10` å’Œ `&5`ã€‚

è¿™ä¸¤ç§å†™æ³•ç­‰ä»·ï¼ŒRust è‡ªåŠ¨å°† `10.add(&5)` è½¬æ¢æˆ `Addable::add(&10, &5)`ã€‚

c. ä¸ºä½• `Rust` ä½¿ç”¨ `::` è¿›è¡Œæ–¹æ³•è°ƒç”¨ ï¼Ÿ

è™½ç„¶ `add` æ˜¯ä¸€ä¸ª å®ä¾‹æ–¹æ³•ï¼Œä½†ä½ åœ¨ `10.add(&5)` ä¸­è°ƒç”¨çš„æ˜¯ `trait` ä¸­å®šä¹‰çš„`å®ä¾‹æ–¹æ³•`ã€‚`Rust` å…è®¸é€šè¿‡ `trait` çš„å®ç° æ¥å®ç°æ–¹æ³•çš„è°ƒç”¨ï¼Œè€Œä¸ä¼šå¼ºåˆ¶è¦æ±‚ä½ ä½¿ç”¨ `Addable` æ¥æ˜¾å¼è°ƒç”¨è¯¥æ–¹æ³•ã€‚è¿™ä¸ªæœºåˆ¶æ˜¯ `Rust` è¯­æ³•çš„ä¸€ä¸ªç®€åŒ–ã€‚

d. ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ `.` æ¥è°ƒç”¨å‘¢ ï¼Ÿ

åŸå› åœ¨äº `Rust` ä½¿ç”¨ `.` æ¥è°ƒç”¨ `å®ä¾‹æ–¹æ³•`,æˆ–è€…è¯´æ˜¯ `ç»“æ„ä½“ struct` å®ä¾‹åŒ–å‡ºæ¥çš„æ–¹æ³•ï¼Œè€Œ `::` ç”¨æ¥è°ƒç”¨ `trait` çš„æ–¹æ³•ï¼ˆåŒ…æ‹¬å®ä¾‹æ–¹æ³•ï¼‰ã€‚
æ‰€ä»¥ï¼Œå°½ç®¡ `add` æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå®ƒå®é™…ä¸Šæ˜¯é€šè¿‡ `Addable trait` å®ç°çš„ï¼Œå› æ­¤ `Rust` ä½¿ç”¨ `::` æ¥è§£æã€‚

ä½ å¯èƒ½è®¤ä¸º `add` åº”è¯¥æ˜¯ä¸€ä¸ªæ™®é€šçš„å®ä¾‹æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨ `.` æ¥è°ƒç”¨ï¼Œä½† `Rust` çš„è®¾è®¡å…è®¸ `trait` æ–¹æ³• è¢«çœ‹ä½œæ˜¯ `ç±»å‹çš„æ–¹æ³•`ã€‚
ç”±äº `Addable trait` çš„ `add` æ–¹æ³•æ˜¯ä¸º `i32` å’Œ `f64` ç±»å‹åˆ†åˆ«å®ç°çš„ï¼Œ`Rust` ä¼šé€šè¿‡ `trait` çš„å®ç°æ¥è°ƒç”¨å®ƒï¼Œè¿™å°±å¯¼è‡´äº†ä½ çœ‹åˆ°çš„ `::` è¯­æ³•ã€‚

æ€»ä¹‹ï¼Œåœ¨ Rust ä¸­ï¼Œ`æ–¹æ³•`ï¼ˆåŒ…æ‹¬ trait å®ç°çš„æ–¹æ³•ï¼‰æ˜¯å’Œ`ç±»å‹å…³è”çš„ (é™æ€æ–¹æ³•ï¼Œå³å…¥å‚ä¸å¸¦ self çš„æ–¹æ³•)`ã€‚å½“ä½ è°ƒç”¨ `10.add(&5)` æ—¶ï¼Œ`Rust` è‡ªåŠ¨æ¨å¯¼å‡ºå®ƒéœ€è¦ä½¿ç”¨ `Addable::add(&10, &5)` æ¥è¿›è¡Œæ–¹æ³•è°ƒç”¨ã€‚è¿™ç§å†™æ³•éšå¼åœ°ä½¿ç”¨äº† `::` æ¥æŸ¥æ‰¾å¯¹åº”çš„ `trait` æ–¹æ³•ï¼Œå› æ­¤ä¸éœ€è¦ä½ æ‰‹åŠ¨å†™å‡º `Addable::add`ã€‚

## 4. `ç»„åˆï¼ˆCompositionï¼‰`

> `ç»„åˆï¼ˆCompositionï¼‰` å’Œ ç±»ä¸­çš„å¤šæ€ï¼ˆPolymorphismï¼‰éƒ½æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå®ƒä»¬éƒ½å¸®åŠ©æˆ‘ä»¬è®¾è®¡çµæ´»å’Œå¯æ‰©å±•çš„ä»£ç ï¼Œä½†å®ƒä»¬åœ¨æ¦‚å¿µå’Œå®ç°ä¸Šæœ‰ä¸€äº›å…³é”®åŒºåˆ«ï¼Œ
å°¤å…¶æ˜¯åœ¨ `Rustï¼ˆå¼ºè°ƒç»„åˆè€Œéç»§æ‰¿ï¼‰`å’Œä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆå¦‚ Javaã€C++ï¼‰ä¸­ã€‚

`ç»„åˆ`æ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå¼ºè°ƒé€šè¿‡å°†å¤šä¸ªå°çš„ã€ç‹¬ç«‹çš„å¯¹è±¡ç»„åˆåœ¨ä¸€èµ·ï¼Œæ¥æ„å»ºä¸€ä¸ªæ›´å¤æ‚çš„å¯¹è±¡ã€‚
åœ¨ `Rust` ä¸­ï¼Œ`ç»„åˆ`çš„æ ¸å¿ƒæ˜¯ `ç»“æ„ä½“`çš„ç»„åˆï¼Œå³ä¸€ä¸ªç»“æ„ä½“åŒ…å«å…¶ä»–ç»“æ„ä½“ä½œä¸ºå…¶å­—æ®µï¼Œå½¢æˆä¸€ç§ `has-a` å…³ç³»,ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªè½¦æœ‰ä¸€ä¸ªå¼•æ“ï¼‰ã€‚

åŒæ—¶åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¯¹äºåŒä¸€ä¸ª ç»“æ„ä½“ Carï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ imp å…³é”®å­—å¯¹å…¶å…·ä½“çš„æ–¹æ³•æˆ–è€…å±æ€§çš„å®ç°ï¼Œè¿›è¡Œå¤šæ¬¡ï¼Œ
è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå¤§çš„æ–¹ä¾¿äº†å¯¹ç»“æ„ä½“è‡ªèº«çš„å¯æ‹“å±•æ€§å’Œä»¥åæ–°åŠŸèƒ½çš„æ·»åŠ ã€‚

```rust

struct Engine {
    horsepower: u32, // å¼•æ“ä¸­æœ‰ä¸€ä¸ªå±æ€§ horsepower å®šä¹‰äº†å¼•æ“çš„é©¬åŠ›å€¼
}

//  æ–°çš„ç»“æ„ä½“ Car å°† Engine ç»“æ„ä½“ç»„åˆèµ·æ¥
struct Car {
    make: String,
    engine: Engine,  // ç»„åˆï¼šCar æ‹¥æœ‰ Engine
}

// å¯ä»¥ä½¿ç”¨ impl å¯¹ç»“æ„ä½“è¿›è¡Œå¤šç§æ–¹æ³•å’Œé™æ€å¸¸é‡å±æ€§çš„å®ç°
impl Car {
    const MAX_SPEED: u32 = 240; // é™æ€å¸¸é‡
}

impl Car {
    // å®ç°è¿™ä¸ª Car ç»“æ„ä½“ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ª new æ–¹æ³•ï¼Œå¸®åŠ©åˆ›å»ºä¸€ä¸ª æ–°çš„ Car å¯¹è±¡
    // ä¹‹æ‰€ä»¥è¿™ä¸ª _new åŠ ä¸‹åˆ’çº¿ï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•åœ¨åé¢å¯èƒ½ä¸è°ƒç”¨ï¼Œé˜²æ­¢ç¼–è¯‘æœ‰ æœªä½¿ç”¨çš„ warning: `#[warn(dead_code)]` on by default
    //  ç”±äºè¿™é‡Œé¢çš„ _new æ–¹æ³•æ²¡æœ‰ä¼ å…¥ &self çš„å¼•ç”¨ï¼Œæ‰€ä»¥ä¸‹é¢çš„ _new çš„å®ç°å±äº ç»“æ„ä½“ Car çš„é™æ€æ–¹æ³•ï¼Œ æˆ–è€…ç§°ä¸ºå…³è”æ–¹æ³•ã€‚
    fn _new(make: String, horsepower: u32) -> Car {
        return Car {
            make,
            engine: Engine { horsepower },
        };
        
        // æ³¨æ„ä¸Šé¢çš„ Ruturn ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·çœç•¥
        // åŒæ—¶éœ€è¦æ³¨æ„ï¼Œå½“çœç•¥äº† return åï¼Œä¸‹é¢çš„é»˜è®¤è¿”å›çš„æœ€åä¸€å®šä¸è¦æºå¸¦ åˆ†å· ; ,  
        // å¦åˆ™æœ€åçš„åˆ†å·ä¼šå¯¼è‡´ Rust å°† ä¸‹é¢ Car çš„åˆ›å»ºè¯­å¥è§†ä¸ºä¸€ä¸ªæ™®é€šçš„è¯­å¥ï¼Œå¹¶è¿”å› (), æ³¨æ„æ­¤æ—¶è¿”å›çš„ () ä¸æ˜¯tupleï¼Œè€Œæ˜¯å•å…ƒç±»å‹ï¼Œè€Œä¸ä¼šè¿”å› Car å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œä»è€ŒæŠ¥é”™ã€‚
        // ä½†æ˜¯ä¸Šé¢å¦‚æœä½¿ç”¨äº† return å…³é”®å­—æ—¶ï¼Œç»“å°¾æœ€å¥½è¦è¦æºå¸¦åˆ†å·ï¼Œå½“ç„¶ç”±äºæ˜¯ä»£ç å—çš„æœ€åä¸€è¡Œï¼Œä»¥ä¸Šçš„ return ä¹Ÿå¯ä»¥ä¸æºå¸¦ åˆ†å·ã€‚
        // Car{
        //     make,
        //     engine: Engine { horsepower },
        // }
    }
}


impl Car {
    // åŒæ—¶è¿™ä¸ªç»“æ„ä½“æœ‰ä¸€ä¸ª print_details çš„æ–¹æ³•
    fn print_details(&self) {
        println!("Make: {}, Horsepower: {}", self.make, self.engine.horsepower);
    }
}


fn main() {
    // :: ç”¨äºè°ƒç”¨ç»“æ„ä½“ã€æšä¸¾æˆ– trait ä¸­å®šä¹‰çš„ é™æ€æ–¹æ³•ï¼ˆå³ å…³è”å‡½æ•°ï¼‰ã€‚è¿™äº›å‡½æ•°é€šå¸¸ä¸éœ€è¦é€šè¿‡å®ä¾‹åŒ–å¯¹è±¡æ¥è°ƒç”¨ï¼Œè€Œæ˜¯é€šè¿‡ç±»å‹æœ¬èº«è¿›è¡Œè°ƒç”¨ã€‚
    // è¿™ä¸€ç‚¹æœ‰ç‚¹ç±»ä¼¼ php çš„ç±»çš„é™æ€è°ƒç”¨ï¼ŒåŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPHP ä¸­çš„ Trait æ˜¯ä¸€ç§ä»£ç å¤ç”¨æœºåˆ¶ï¼Œå®ƒå…è®¸å¤šä¸ªç±»å…±äº«ç›¸åŒçš„æ–¹æ³•ï¼Œä½†å¹¶ä¸æ¶‰åŠå®ä¾‹åŒ–è¡Œä¸ºã€‚
    // ä½†æ˜¯å®ƒä»¬çš„ Trait éƒ½ä¸èƒ½å®šä¹‰å±æ€§ï¼Œå®ƒä»¬åªåŒ…å«æ–¹æ³•å®ç°ã€‚Rust çš„ Trait æ˜¯å¼ºç±»å‹çš„ï¼Œå¹¶ä¸”æ˜¯ è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œ PHP çš„ Trait æ›´ä¾§é‡äºä»£ç çš„å¤ç”¨ã€‚
    let car = Car::_new(String::from("Toyota"), 200);
    
    // ç›¸æ¯”è¾ƒäºä¸Šé¢ï¼Œä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™ä¹ˆå†™ï¼Œæ³¨æ„åœ¨å®é™…ä½¿ç”¨ä¸­çš„ Car å®ç°çš„å…¶å®æœ¬è´¨ä¸Šè¿˜æ˜¯ ç»“æ„ä½“
    // let car = Car{
    //         make: "Toyota".to_string(),
    //         engine: Engine{horsepower: 200}
    //     };
    
    // Car::MAX_SPEED ä½¿ç”¨ :: æ¥è®¿é—®ç»“æ„ä½“ Car ä¸­çš„å…³è”å¸¸é‡ MAX_SPEED (ä¹Ÿå°±æ˜¯é™æ€å¸¸é‡)
    // æ³¨æ„ï¼Œå¯¹äº Rust ç»“æ„ä½“ä¸­çš„é™æ€å¸¸é‡æˆ–è€…æ–¹æ³•çš„è®¿é—®åªèƒ½ä½¿ç”¨ ï¼šï¼š ç¬¦å·   
    let car_max_speed = Car::MAX_SPEED;

    println!("cars' max speed is {car_max_speed}"); // è¾“å‡ºï¼šcars' max speed is 240
    car.print_details();  // è¾“å‡ºï¼šMake: Toyota, Horsepower: 200
}

```


# ä¸€äº›æ€»ç»“

æ€»ä¹‹ä¸€å¥è¯ï¼Œ åœ¨Rustä¸­ `ç‰¹å¾ trait`å’Œ `ç»“æ„ä½“ struct `åˆ†åˆ«æ˜¯å¯¹æŸä¸ªå¯¹è±¡çš„`æ–¹æ³• fn`å’Œ`å±æ€§`çš„`ç±»å‹æŠ½è±¡`ï¼Œ
è€Œå…·ä½“çš„`å®ç°`è¿˜éœ€è¦å€ŸåŠ© `impl å…³é”®å­—`æ¥å®ç°è¿™äº›æŠ½è±¡çš„æ¦‚å¿µå’Œå°†å¯¹åº”çš„`ç‰¹å¾`å’Œ`æ–¹æ³•`è¿›è¡Œ`ç»„åˆ(Composition)`,ä»è€Œå½¢æˆå¤æ‚ä¸”æ»¡è¶³éœ€æ±‚çš„`å¯¹è±¡`ã€‚

ä¸‹é¢æ˜¯å¯¹ä»¥ä¸Šç§ç§ç›¸ç»“åˆçš„ä¸€ä¸ªä¾‹å­ï¼š

```rust

trait Barking {
    fn bark(&self); // ç‰¹å¾ Barking æŠ½è±¡å‡ºäº†ä¸€ä¸ª bark æ–¹æ³•
}

struct Dog {
    name: String,
}

struct Engine {
    horsepower: u32,
}

struct Car {
    maker: String,
    engine: Engine,
    barker: Box<dyn Barking>,  // ç»„åˆå¹¶å®ç°å¤šæ€
}

// ä¸º Dogå®ç° Barking ç‰¹å¾ä¸­çš„ bark æ–¹æ³•
impl Barking for Dog {
    fn bark(&self) {
        println!("{} says Woof!", self.name);
    }
}

impl Car {
    // æ²¡æœ‰ self çš„ é™æ€æ–¹æ³•
    fn new(make: String, horsepower: u32, barker: Box<dyn Barking>) -> Car {
        
        // ç”±äºæ­¤æ—¶ä¸‹é¢çœç•¥äº†å…³é”®å­— returnï¼Œ æ‰€ä»¥ç»“å°¾ä¸€å®šä¸èƒ½æ·»åŠ åˆ†å· ï¼› ï¼Œ 
        // å¦åˆ™ä¼šè¢« Rust çœ‹æˆæ˜¯ æ™®é€šè¯­å¥ï¼Œå¹¶è¿”å› (), æ³¨æ„æ­¤æ—¶è¿”å›çš„ () ä¸æ˜¯tupleï¼Œè€Œæ˜¯å•å…ƒç±»å‹ï¼Œè€Œä¸ä¼šè¿”å› Car å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œä»è€ŒæŠ¥é”™ã€‚
        Car {
            maker:make,
            engine: Engine { horsepower },
            barker,  // è¿™é‡Œå¯ä»¥åƒjs ä¸€æ ·ï¼Œå¾€å¯¹è±¡é‡Œé¢ä¼ å‚
        } 
    }

    // è¿™æ˜¯å®ä¾‹åŒ–æ–¹æ³•ï¼Œæœ‰ &self å…¥å‚
    fn play_sound(&self) {
        println!("{} maked the {}'s housepower car",self.maker,self.engine.horsepower);
        self.barker.bark();
    }
}

fn main() {
    let dog = Dog { name: String::from("Buddy") };
    // å…ˆç‹—å 
    dog.bark(); // è¾“å‡º Buddy says Woof!
    // æ³¨æ„å¯¹äºä¸‹é¢çš„ Car ç”±äºåœ¨å®ä¾‹åŒ–æ—¶ï¼Œç›´æ¥å…¥å‚äº† dog å¯¹è±¡ï¼Œ
    // æ‰€ä»¥åœ¨ä¸‹é¢çš„ å‡½æ•°æ‰§è¡Œå®Œæ—¶ï¼Œdog ä¼šè¢«dropæ‰ï¼Œè¿™æ˜¯å› ä¸º ä¸‹é¢çš„newåœ¨è°ƒç”¨æ—¶,å…¥å‚dog ä¼šå¯¼è‡´ dog çš„æ‰€æœ‰æƒownershipå‘ç”Ÿå˜åŠ¨,æ‰€ä»¥ä¼šè¢«é”€æ¯ã€‚ 
    let car = Car::new(String::from("Toyota"), 200, Box::new(dog));
    // å†å¡è½¦å£°æµª
    car.play_sound();  // è¾“å‡ºï¼šToyota maked the 200's housepower car  å’Œ Buddy says Woof!
}


```
